image:
  pullPolicy: Always

podManagementPolicy: Parallel

serviceAccount:
  create: true

ingress:
  enabled: true
  annotations:
    kubernetes.io/ingress.class: nginx-internal
    nginx.ingress.kubernetes.io/proxy-body-size: "0"
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
    nginx.ingress.kubernetes.io/affinity: "cookie"
    nginx.ingress.kubernetes.io/affinity-mode: "persistent"
    nginx.ingress.kubernetes.io/session-cookie-name: "SWARMGATEWAY"
    nginx.ingress.kubernetes.io/session-cookie-max-age: "86400" # 30 minutes
    nginx.ingress.kubernetes.io/session-cookie-path: "default"
    nginx.ingress.kubernetes.io/proxy-send-timeout: "7200"
    nginx.ingress.kubernetes.io/proxy-read-timeout: "7200"
  hosts:
    - paths:
        - /

ingressDebug:
  enabled: true
  annotations:
    kubernetes.io/ingress.class: nginx-internal
  hosts:
    - paths:
        - /

# resources:
#   limits:
#     memory: 1Gi
#     cpu: 0.5
#   requests:
#     memory: 1Gi
#     cpu: 0.25

imagePullSecrets:
  - name: regcred

nodeSelector:
  node-group: testnet-giant

resources:
  limits:
    memory: 3.0Gi
    cpu: 1.75
  requests:
    memory: 2.0Gi
    cpu: 1.0

persistence:
  enabled: true
  size: 5Gi
  storageClass: gp2
  separateLocalstore:
    enabled: true
    accessMode: ReadWriteOnce
    size: 34Gi
    storageClass: local-storage-4hdd

beeConfig:
  bootnode: "/ip4/3.127.217.158/tcp/31000/p2p/QmbVLSLaaCNL5ERAMhbZv4uhWF1jZs6YP9t8LpmnFnMc7C"
  full-node: true
  swap-enable: true
  debug-api-enable: true
  mainnet: false
  network-id: 333
  cache-capacity: 5000000
  tracing-enable: true
  tracing-service-name: ph4-test
  tracing-endpoint: tempo-tempo-distributed-distributor.observability:6831
  swap-endpoint: http://goerli-geth.goerli-geth:8545
  swap-initial-deposit: 0
  verbosity: 5
  resolver-options: https://cloudflare-eth.com
  welcome-message: "Welcome to the PH4 Testnet!"

p2pFixedPort:
  enabled: true

password: ph4-testing

libp2pSettings:
  enabled: false

swarmSettings:
  enabled: false

gatewayProxy:
  enabled: false
  image:
    repository: ethersphere/gateway-proxy
    tag: 0.5.1
  autobuy:
    enabled: true
  ingress:
    enabled: true
    annotations:
      nginx.ingress.kubernetes.io/limit-rpm: "15"
      nginx.ingress.kubernetes.io/limit-burst-multiplier: "2"
      nginx.ingress.kubernetes.io/proxy-body-size: "100m"
      nginx.ingress.kubernetes.io/ssl-redirect: "true"
      nginx.ingress.kubernetes.io/affinity: "cookie"
      nginx.ingress.kubernetes.io/affinity-mode: "persistent"
      nginx.ingress.kubernetes.io/session-cookie-name: "SWARMGATEWAY"
      nginx.ingress.kubernetes.io/session-cookie-max-age: "86400" # 1 day
      nginx.ingress.kubernetes.io/session-cookie-path: "default"
      nginx.ingress.kubernetes.io/proxy-send-timeout: "7200"
      nginx.ingress.kubernetes.io/proxy-read-timeout: "7200"
      nginx.ingress.kubernetes.io/configuration-snippet: |
        add_header 'Access-Control-Allow-Headers' 'Swarm-Collection,Swarm-Index-Document,Swarm-Postage-Batch-Id,Swarm-Encrypt';
      nginx.ingress.kubernetes.io/cors-allow-methods: GET, POST, OPTIONS
      nginx.ingress.kubernetes.io/cors-allow-origin: "*"
      nginx.ingress.kubernetes.io/enable-cors: "true"
    ingressClassName: nginx
    pathType: Prefix
    hosts:
      - domain: gateway.testnet.ethswarm.org
        paths:
          - /
        tlsSecret: gateway-testnet-ethswarm-org-wildcard-cert
    tls: true    
  envs:
    - name: POSTAGE_DEPTH
      value: "24"
    - name: POSTAGE_AMOUNT
      value: "50000001"
    - name: POSTAGE_USAGE_THRESHOLD
      value: "0.874"
    - name: POSTAGE_USAGE_MAX
      value: "0.9374"
    - name: LOG_LEVEL
      value: "debug"
    - name: CID_SUBDOMAINS
      value: "true"
    - name: ENS_SUBDOMAINS
      value: "true"
